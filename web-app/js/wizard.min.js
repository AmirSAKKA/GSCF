var warnOnRedirect=true;$(document).ready(function(){re=/Firefox\/3\.6/gi;if(navigator.userAgent.match(re)){var wizard=$('div#wizard');if(wizard.find("#warning").length===0){wizard.html('<span id="warning" style="color:red;font-size:8px;">Firefox 3.6 contains <a href="http://code.google.com/p/fbug/issues/detail?id=2746" target="_new">a bug</a> in combination with Firebug\'s XMLHttpRequest spy which causes the wizard to not function anymore. Please make sure you have Firebug\'s XMLHttpRequest spy disabled or use Firefox 3.5.7 instead...</span>'+wizard.html())}}insertOnRedirectWarning();onWizardPage()});function onWizardPage(){attachHelpTooltips();attachDatePickers();attachDateTimePickers();attachTableEvents();handleWizardTable();new TableEditor().init('div.table','div.row','div.column');new OntologyChooser().init();new SelectAddMore().init({rel:'term',url:'/gscf/termEditor',vars:'ontologies',label:'add more...',class:'addMore',onClose:function(scope){refreshWebFlow()}});new SelectAddMore().init({rel:'template',url:'/gscf/templateEditor',vars:'entity',label:'add / modify..',class:'modify',onClose:function(scope){refreshWebFlow()}});$("#accordion").accordion()}function insertOnRedirectWarning(){$('a').each(function(){var element=$(this);var re=/^#/gi;if(!element.attr('href').match(/^#/gi)&&!element.attr('href').match(/\/([^\/]+)\/wizard\/pages/gi)){element.bind('click',function(){if(warnOnRedirect){return onDirectWarning()}})}})}function onDirectWarning(){return confirm('Warning: navigating away from the wizard causes loss of work and unsaved data. Are you sure you want to continue?')}function attachHelpTooltips(){$('div#wizard').find('div.helpIcon').each(function(){helpIcon=$(this);helpContent=helpIcon.parent().parent().find('div.helpContent');var html=(helpContent.html())?helpContent.html():'';if(html){var specialContent=html.match(/\[([^:]+)\:([^\]]+)\]/);if(specialContent){eval(specialContent[1]+"('"+specialContent[2]+"',helpContent)")}helpIcon.qtip({content:'leftMiddle',position:{corner:{tooltip:'leftMiddle',target:'rightMiddle'}},style:{border:{width:5,radius:10},padding:10,textAlign:'center',tip:true,name:'blue'},content:helpContent.html(),show:'mouseover',hide:'mouseout',api:{beforeShow:function(){}}});helpContent.remove()}})}function youtube(video,element){element.html("<div id='"+video+"'></div>");var params={allowScriptAccess:"always"};var atts={id:'myytplayer_'+video};swfobject.embedSWF("http://www.youtube.com/v/"+video+"?enablejsapi=1&playerapiid=ytplayer_"+video,video,"200","150","8",null,null,params,atts)}function onYouTubePlayerReady(playerId){ytplayer=document.getElementById("my"+playerId);ytplayer.playVideo()}function attachDatePickers(){$('div#wizard').find("input[type=text][rel$='date']").each(function(){$(this).datepicker({numberOfMonths:3,showButtonPanel:true,changeMonth:true,changeYear:true,dateFormat:'dd/mm/yy',altField:'#'+$(this).attr('name')+'Example',altFormat:'DD, d MM, yy'})})}function attachDateTimePickers(){$('div#wizard').find("input[type=text][rel$='datetime']").each(function(){$(this).datepicker({changeMonth:true,changeYear:true,dateFormat:'dd/mm/yy',altField:'#'+$(this).attr('name')+'Example',altTimeField:'#'+$(this).attr('name')+'Example2',altFormat:'DD, d MM, yy',showTime:true,time24h:true})})}function attachTableEvents(){$('div#wizard').find('div.row').each(function(){$(this).hover(function(){$(this).addClass('highlight')},function(){$(this).removeClass('highlight')})})}function handleWizardTable(){var that=this;var wizardTables=$("div#wizard").find('div.table');wizardTables.each(function(){var wizardTable=$(this);var sliderContainer=(wizardTable.next().attr('class')=='sliderContainer')?wizardTable.next():null;var header=wizardTable.find('div.header')var width=20;header.children().each(function(){var c=$(this);var columnWidth=c.width();columnWidth+=parseInt(c.css("padding-left"),10)+parseInt(c.css("padding-right"),10);columnWidth+=parseInt(c.css("margin-left"),10)+parseInt(c.css("margin-right"),10);columnWidth+=parseInt(c.css("borderLeftWidth"),10)+parseInt(c.css("borderRightWidth"),10);width+=columnWidth});header.css({width:width+'px'});wizardTable.find('div.row').each(function(){$(this).css({width:width+'px'})});if(sliderContainer){if(header.width()<wizardTable.width()){sliderContainer.css({'display':'none '})}else{sliderContainer.slider({value:1,min:1,max:header.width()-wizardTable.width(),step:1,slide:function(event,ui){wizardTable.find('div.header, div.row').css({'margin-left':(1-ui.value)+'px'})}})}}})}